# 噼里啪啦小助手 - 项目需求文档

## 项目概述
噼里啪啦小助手：开发一个基于Web的工作流处理器，用户可以文字/文件，通过调用扣子工作流API后输出完整的coze工作流反馈。项目采用科技感风格设计，具备完整的图文展示、复制、下载等功能。

## 技术要求
- **平台**: 纯静态网页，可直接在浏览器运行
- **兼容性**: 移动端优先，响应式设计
- **技术栈**: HTML5 + CSS3 + JavaScript (原生)
- **API集成**: 扣子工作流API (非流式响应)
- **外部依赖**: JSZip库用于批量下载功能。

## 功能描述


### 2. API集成规格
#### 2.1 窗口1外接工作流
- **接口地址**: `https://api.coze.cn/v1/workflow/run`
- **请求方法**: POST
- **认证方式**: Bearer Token
- **Token**: `pat_ZiVGbB5siln3M8TWCLEvAuq63ugpMc6meCoWe9jTnivP7fzu1g6fPVv5uVPZ1AMi`
- **工作流ID**: `7560945341966483502`
- **请求参数**:
  ```json
  {
    "workflow_id": "7560945341966483502",
    "parameters": {
      "input": "用户输入的内容",
    }
  }
  ```
- **响应处理**:
  - 检查HTTP状态码
  - 检查业务状态码(code字段)
  - 解析data字段中的内容和图片数据

### 3. 返回数据处理
#### 3.1 窗口1外接工作流返回数据处理
         formatCozeResponse 函数会提取 output 字段中的文本数据，并且处理为方便可视的规范排序文字信息，可以设置一个“眼睛”按钮，点击后可以看到清晰干爽的数据处理反馈，不会让用户看的难受。
#### 3.2 是  

### 1. 多窗口工作流
- **窗口1**：[待定义工作流A] - 描述：[用户需补充具体功能]
- **窗口2**：[待定义工作流B] - 描述：[用户需补充具体功能]
- **窗口3**：文件处理工作流 - 功能：上传文件后返回下载链接

### 2. 文件处理工作流详情
- **文件上传**：支持常见格式（.txt, .csv, .md等）
- **处理逻辑**：[待定义处理规则]
- **输出**：生成可下载的处理结果链接

## 页面样式要求
1. **整体风格**：科技感视觉设计，色彩明亮
2. **指引说明**：每个窗口需明确标注工作流作用和使用方法
3. **交互设计**：点击窗口进入对应工作流，操作流程简单直观

## 后续待补充信息
- 工作流A和B的具体功能需求
- 文件处理工作流的详细逻辑
- 偏好的颜色方案和视觉元素





## 开发指南

### 1. 开发顺序
1. **HTML结构搭建** - 完整的DOM结构和语义化标签
2. **CSS样式实现** - 渐变背景、卡片设计、响应式布局
3. **JavaScript基础** - DOM引用、事件绑定、状态管理
4. **API集成** - fetch请求、数据解析、错误处理
5. **结果展示** - 内容格式化、图片网格、交互功能
6. **高级功能** - 复制、下载、Toast提示
7. **优化调试** - 性能优化、兼容性测试

### 2. 关键实现点
- **API配置**: 确保token和workflowId正确
- **图片容器**: 使用imageGallery作为ID
- **图片网格**: 不设置max-height限制，确保多排图片完整显示
- **状态切换**: showSection函数管理界面显示
- **数据解析**: parseAPIResult处理多种数据格式
- **错误边界**: 完整的错误捕获和用户提示

### 3. 测试要点
- API调用成功/失败场景
- 图片加载成功/失败处理
- 复制功能在不同浏览器的兼容性
- 下载功能的文件完整性
- 移动端触摸交互
- 网络异常情况处理

## 部署说明
- **运行方式**: 直接在浏览器打开index.html
- **本地服务器**: 推荐使用python -m http.server
- **CORS处理**: API支持跨域请求
- **浏览器兼容**: 现代浏览器(ES6+支持)

## 注意事项
- Token和工作流ID需要根据实际情况配置
- 图片URL需要支持跨域访问
- 下载功能需要用户手动触发(浏览器安全限制)
- 移动端测试时注意触摸事件和视口适配
- 确保所有异步操作都有适当的错误处理